## MPCA SCORE UPDATE {#sec-mpca-score-update}

```{r}
source(file.path(here::here(), "R/_quarto_helpers.R"))
source(file.path(here::here(), "R/_load_pkgs.R"))
source(file.path(here::here(), "R/_plotting_helpers.R"))
# pull data here
mpca_score <- readRDS(file.path(here::here(), "_waste/data-raw/solid_waste/mpca_score_allyrs.RDS")) %>%
  mutate(source = factor(source,
    levels = c(
      "Waste to energy",
      "Organics",
      "Recycling",
      "Landfill",
      "MSW Compost",
      "Onsite"
    ),
    ordered = TRUE
  ))
# mpca_score_meta <- readRDS(file.path(here::here(), "_waste/data/mpca_score_meta.RDS"))
cprg_county <- readRDS(file.path(here::here(), "_meta/data/cprg_county.RDS"))
cprg_pop <- readRDS(file.path(here::here(), "_meta/data/cprg_population.RDS"))
hookaddcap()
```

```{r}
# graph mpca totals by county(cat) by year
mpca_waste_sums <- mpca_score %>%
  group_by(geoid, inventory_year) %>%
  summarize(total_waste = sum(value_activity))

ggplot(mpca_waste_sums) +
  geom_line(aes(inventory_year, total_waste, color = geoid))

mpca_score %>%
  group_by(source, inventory_year) %>%
  summarize(total_waste = sum(value_activity)) %>%
  ggplot() +
  geom_line(aes(inventory_year, total_waste, color = source))
```


```{r echo=FALSE, eval=FALSE}
caption_index <- readRDS(file.path(here::here(), "caption_index.RDS"))
caption_index <- as.character(as.numeric(caption_index) + 1) %>% stringr::str_pad(width = 2, side = "left", pad = "0")
saveCap(paste0("cap-", caption_index))
saveRDS(caption_index, file.path(here::here(), "caption_index.RDS"))
```
